<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>dcd</title>
    <style>
      html,
      body {
        margin: 0;
        position: relative;
      }
      :root {
        --font-size: 10px;
      }
      html {
        font-size: var(--font-size);
      }
    </style>
  </head>
  <body>
    <!-- <script src="http://115.236.87.26:8000/dcd/DDEarth.js"></script> -->
    <!-- <script src="http://115.236.87.26:8000/dcd/DDEarth_3.0.js"></script> -->
    <!-- <script src="http://115.236.87.26:9999/xwyq/DDEarth20190530.js"></script> -->
    <!-- <script src="http://115.236.87.26:9999/xwyq/DDEarthPlus.js"></script> -->
    <!-- <div id="glCanvas1" style='width:calc(100vw);height:calc(100vh);display: block;'>
        <button style="position: absolute;top: 0px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="addModelBtn()">添加设备</button>
        <button style="position: absolute;top: 40px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="setRightMenu()">右键菜单</button>
        <button style="position: absolute;top: 80px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="changeMap()">切换到二维</button>
        <button style="position: absolute;top: 120px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="showLayer()">图层显示</button>
        <button style="position: absolute;top: 160px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="hideLayer()">图层隐藏</button>
    </div>
    <div id="glCanvas2" style='width:calc(100vw);height:calc(100vh);display: none;'>
        <button style="position: absolute;top: 0px; padding: 5px 10px; cursor: pointer; z-index: 1"
            onclick="changeMap()" id="btn1">切换到三维</button>
    </div> -->
    <noscript>
      <strong>We're sorry but dcd doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app">
    </div>
    
  </body>
  <!-- <script>
    (function () {
        var cfg1 = {
            EngineIP: 'http://115.236.87.26:9904/',//引擎访问地址（必填）
            dom: document.getElementById("glCanvas1"),//<body>标签中的div的ID（必填）
            key: 'wSryzKApfH8y'//产品密钥（必填）
        };
        window.engine = new Engine(cfg1);//创建三维地图对象
        engine.open();//打开三维地图

        engine.on('EngineFinish', () => {
            //添加图层
            engine.Api.Layers.addLayer({ objType: 'FFDX_GEO_3DMODEL' });
        });

        //对象点击事件
        engine.on('MeshClick', (uuid, obj) => {
            obj);
            let vs = uuid.split(':');
            if (vs[0] == 'FFDX_GEO_3DMODEL') {
                engine.Api.Pop.setPop(vs[0], vs[1], function (result) {
                    result.innerText = uuid;
                    result.style.color = 'red';
                });
                engine.Api.Pop.show(vs[0], vs[1]);
            }

            if (window.addModel) {
                let data = JSON.parse(obj);
                data);
                engine.Api.Models.addModel("FFDX_GEO_3DMODEL", "Obj", { id: parseInt(Math.random() * (100) + 1, 10), jsType: "Models.Obj", shapes: [{ x: data.x, y: data.y, z: data.z, EPSGType: "4326" }], assetPath: "http://115.236.87.26:8000/lcjy/images/3DModel/Obj/test2.gisway" });
                window.addModel = false;
            }
        });

        //右键点击事件
        engine.on('MeshRightClick', (uuid) => {
            window.uuid = uuid;
        })

        let cfg2 = {
            dom: document.getElementById('glCanvas2'),
            key: 'wSryzKApfH8y',
            EngineIP: 'http://115.236.87.26:9004',//引擎访问地址
            ResourcesIP: 'http://115.236.87.26:9999/xwyq/',//资源访问地址
            hideBGTile: false,//是否隐藏底图切片（默认为true）
        };
        window.earth = new Earth(cfg2);//创建二维地图对象
        earth.open();//打开二维地图

        window.onload = function () {
            document.getElementById('btn1').style.display = "none";
        }
    }())

    function addModelBtn() {
        window.addModel = true;
    }
    function changeMap() {
        if (document.getElementById('glCanvas1').style.display == "block") {
            document.getElementById('glCanvas1').style.display = "none";
            document.getElementById('glCanvas2').style.display = "block";
            earth.fireEvent('EarthResize', earth);
        } else {
            document.getElementById('glCanvas1').style.display = "block";
            document.getElementById('glCanvas2').style.display = "none";
            document.getElementById('btn1').style.display = "none";
            engine.fireEvent('EngineResize', engine);
        }
    }
    function delModel() {
        let vs = window.uuid.split(':');
        engine.Api.Models.delModel(vs[0], vs[1]);
        engine.Api.Pop.clearPop('FFDX_GEO_3DMODEL', vs[1]);
    }
    function editModel(){
        let vs = window.uuid.split(':');
        engine.Api.MeshInfo.doEdit(vs[0], vs[1],{shapes: [{ x: 121.88013965426454, y: 28.464585647653905, z: 44.705730438232422, EPSGType: "4326" }]});
    }
    function setRightMenu() {
        let ul = document.createElement('ul');
        ul.style.cssText = `list-style-type:none;margin:0;cursor:pointer;color:white;`;
        let li_1 = document.createElement('li');
        li_1.innerHTML = '删除设备';
        li_1.event = { type: 'click', fn: this.delModel }//li对象点击事件绑定delModel方法
        ul.appendChild(li_1);
        let li_2 = document.createElement('li');
        li_2.innerHTML = '编辑设备';
        li_2.event = { type: 'click', fn: this.editModel }//li对象点击事件绑定delModel方法
        ul.appendChild(li_2);
        engine.Api.Menus.setMenu('FFDX_GEO_3DMODEL', ul);//设置右键菜单，传入对象的objType和自定义菜单的html
    }
    function showLayer() {
        engine.Api.Layers.showLayer('FFDX_GEO_3DMODEL', true);
    }
    function hideLayer() {
        engine.Api.Layers.showLayer('FFDX_GEO_3DMODEL', false);
    }
    
    
  </script> -->
</html>
